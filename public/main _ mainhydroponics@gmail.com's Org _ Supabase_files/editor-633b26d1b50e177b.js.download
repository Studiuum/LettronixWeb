!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="669517b7-ed0c-463a-91d6-80e5d686e0a0",e._sentryDebugIdIdentifier="sentry-dbid-669517b7-ed0c-463a-91d6-80e5d686e0a0")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4598,6841,6851],{35443:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>n,aR:()=>i,wL:()=>u});var s=r(80263),a=r(53239),l=r(82457);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-surface-100 text-card-foreground shadow-sm",r),...a})});n.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 py-4 px-6 border-b",r),...a})});i.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h3",{ref:t,className:(0,l.cn)("text-xs font-mono uppercase",r),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-foreground-muted",r),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("py-4 px-6 border-b last:border-none",r),...a})});o.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)(" flex items-center py-4 px-6",r),...a})});u.displayName="CardFooter"},37836:(e,t,r)=>{"use strict";r.d(t,{A:()=>U});var s=r(80263),a=r(60045),l=r(53667),n=r.n(l),i=r(69399),c=r(8758),d=r.n(c),o=r(87355),u=r(73969),x=r(25481),p=r(16390),m=r(41667),f=r(50689),h=r(19070),g=r(45628),j=r(35416),y=r(27528),b=r(72147),v=r(49508),N=r(53674),w=r(23601),q=r(82457),k=r(16425),C=r(37263),_=r(45159),R=r(9895),I=r(46194),T=r(53434),E=r.n(T),A=r(27344),L=r.n(A),P=r(37055),S=r(88712),W=r(25650);function D(){let{ref:e}=(0,x.g)(),t=(0,N.zv)(),r=(0,_.l)();if(!(null==t?void 0:t.recentItems)||!e)return null;let a=(r?t.recentItems.filter(e=>N.qm[r].includes(e.type)):[...t.recentItems]).sort((e,t)=>t.timestamp-e.timestamp);return(0,s.jsxs)("div",{className:"space-y-4","data-sentry-component":"RecentItems","data-sentry-source-file":"RecentItems.tsx",children:[(0,s.jsx)("h2",{className:"text-sm text-foreground",children:"Recent items"}),(0,s.jsx)("div",{className:"flex flex-col gap-0",children:0===a.length?(0,s.jsxs)(P.P.div,{layout:!0,initial:!1,className:"flex flex-col items-center justify-center p-8 text-center border rounded-md border-muted gap-3",children:[(0,s.jsx)(W.L,{type:"r"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-foreground-light",children:"No recent items yet"}),(0,s.jsx)("p",{className:"text-xs text-foreground-lighter",children:"Items will appear here as you browse through your project"})]})]}):(0,s.jsx)(S.N,{children:(0,s.jsx)("div",{className:"grid grid-cols-1 gap-12 gap-y-0",children:a.map((t,r)=>{var a,l,n,i,c,o,u;return(0,s.jsx)(P.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{delay:.012*r,duration:.15},children:(0,s.jsxs)(d(),{href:"/project/".concat(e,"/").concat("sql"===t.type?"sql/".concat(null==(a=t.metadata)?void 0:a.sqlId):"r"===t.type||"v"===t.type||"m"===t.type||"f"===t.type||"p"===t.type?"editor/".concat(null==(l=t.metadata)?void 0:l.tableId,"?schema=").concat(null==(n=t.metadata)?void 0:n.schema):"explorer/".concat(t.type,"/").concat(null==(i=t.metadata)?void 0:i.schema,"/").concat(null==(c=t.metadata)?void 0:c.name)),className:"flex items-center gap-4 rounded-lg bg-surface-100 py-2 transition-colors hover:bg-surface-200",children:[(0,s.jsx)("div",{className:"flex h-6 w-6 items-center justify-center rounded bg-surface-100 border",children:(0,s.jsx)(W.L,{type:t.type})}),(0,s.jsxs)("div",{className:"flex flex-1 gap-5 items-center",children:[(0,s.jsxs)("span",{className:"text-sm text-foreground",children:[(0,s.jsx)("span",{className:"text-foreground-lighter",children:null==(o=t.metadata)?void 0:o.schema}),(null==(u=t.metadata)?void 0:u.schema)&&(0,s.jsx)("span",{className:"text-foreground-light",children:"."}),(0,s.jsx)("span",{className:"text-foreground",children:t.label||"Untitled"})]}),(0,s.jsx)("div",{className:"bg-border-muted flex grow h-px"}),(0,s.jsx)("span",{className:"text-xs text-foreground-lighter",children:E()(t.timestamp).fromNow()})]})]})},t.id)})})})})]})}function U(){let e=(0,o.useRouter)(),{ref:t}=(0,x.g)(),r=(0,_.l)(),{profile:l}=(0,y.xc)(),c=(0,g.a)(),{project:T}=(0,R.Om)(),E=(0,v.ap)(),A=(0,b.aP)(),L=(0,N.zv)(),[P]=n()(p.R,{type:"template"}),[S]=n()(p.R,{type:"quickstart"}),{mutate:W}=(0,f.h)(),U=(0,h.SE)(a.aG.CREATE,"user_content",{resource:{type:"sql",owner_id:null==l?void 0:l.id},subject:{id:null==l?void 0:l.id}}),z=[{icon:(0,s.jsx)(i.A,{className:"h-4 w-4 text-foreground",strokeWidth:1.5}),title:"Create a table",description:"Design and create a new database table",bgColor:"bg-blue-500",isBeta:!1,onClick:E.onAddTable}],B=[{icon:(0,s.jsx)(w.ty,{className:(0,q.cn)("fill-foreground","w-4 h-4"),strokeWidth:1.5}),title:"New SQL Snippet",description:"Execute SQL queries",bgColor:"bg-green-500",isBeta:!1,onClick:()=>e.push("/project/".concat(t,"/sql/new"))}],M=async(r,s)=>{if(!t)return console.error("Project ref is required");if(!T)return console.error("Project is required");if(!l)return console.error("Profile is required");if(!U)return(0,u.oR)("Your queries will not be saved as you do not have sufficient permissions");try{let a=(0,m.fW)({id:(0,j.gZ)(),name:s,sql:r,owner_id:null==l?void 0:l.id,project_id:null==T?void 0:T.id});A.addSnippet({projectRef:t,snippet:a}),A.addNeedsSaving(a.id);let n=(0,N.lW)("sql",{id:a.id});L.addTab({id:n,type:"sql",label:s,metadata:{sqlId:a.id}}),e.push("/project/".concat(t,"/sql/").concat(a.id))}catch(e){u.oR.error("Failed to create new query: ".concat(e.message))}};return(0,s.jsxs)("div",{className:"bg-surface-100 h-full overflow-y-auto py-12","data-sentry-component":"NewTab","data-sentry-source-file":"NewTab.tsx",children:[(0,s.jsxs)("div",{className:"mx-auto max-w-2xl flex flex-col gap-10 px-10",children:[(0,s.jsx)("div",{className:"grid grid-cols-2 gap-4",children:("sql"===r?B:z).map((e,t)=>(0,s.jsx)(I.L,{...e},"action-card-".concat(t)))}),(0,s.jsx)(D,{"data-sentry-element":"RecentItems","data-sentry-source-file":"NewTab.tsx"})]}),"sql"===r&&(0,s.jsx)("div",{className:"flex flex-col gap-4 mx-auto py-10",children:(0,s.jsxs)(k.tU,{defaultValue:"templates",children:[(0,s.jsxs)(k.j7,{className:"mx-auto justify-center gap-5",children:[(0,s.jsx)(k.Xi,{value:"templates",children:"Templates"}),(0,s.jsx)(k.Xi,{value:"quickstarts",children:"Quickstarts"})]}),(0,s.jsxs)(k.av,{value:"templates",className:"max-w-5xl mx-auto py-5",children:[(0,s.jsx)("div",{className:"grid grid-cols-3 gap-4 px-8",children:P.slice(0,9).map((e,r)=>(0,s.jsx)(I.L,{onClick:()=>{var r;M(e.sql,e.title),W({action:"sql_editor_template_clicked",properties:{templateName:e.title},groups:{project:null!=t?t:"Unknown",organization:null!=(r=null==c?void 0:c.slug)?r:"Unknown"}})},bgColor:"bg-alternative border",...e,icon:(0,s.jsx)(w.ty,{className:(0,q.cn)("fill-foreground","w-4 h-4"),strokeWidth:1.5})},"action-card-".concat(r)))}),(0,s.jsx)("div",{className:"flex justify-center mt-5",children:(0,s.jsx)(C.$,{asChild:!0,type:"default",children:(0,s.jsx)(d(),{href:"/project/".concat(t,"/sql/templates"),children:"View more templates"})})})]}),(0,s.jsxs)(k.av,{value:"quickstarts",className:"max-w-5xl mx-auto py-5",children:[(0,s.jsx)("div",{className:"grid grid-cols-3 gap-4 px-8",children:S.map((e,r)=>(0,s.jsx)(I.L,{onClick:()=>{var r;M(e.sql,e.title),W({action:"sql_editor_quickstart_clicked",properties:{quickstartName:e.title},groups:{project:null!=t?t:"Unknown",organization:null!=(r=null==c?void 0:c.slug)?r:"Unknown"}})},bgColor:"bg-alternative border",...e,icon:(0,s.jsx)(w.ty,{className:(0,q.cn)("fill-foreground","w-4 h-4"),strokeWidth:1.5})},"action-card-".concat(r)))}),(0,s.jsx)("div",{className:"flex justify-center mt-5",children:(0,s.jsx)(C.$,{asChild:!0,type:"default",children:(0,s.jsx)(d(),{href:"/project/".concat(t,"/sql/quickstarts"),children:"View more templates"})})})]})]})})]})}E().extend(L())},46194:(e,t,r)=>{"use strict";r.d(t,{L:()=>n});var s=r(80263),a=r(35443),l=r(72470);let n=e=>(0,s.jsx)(a.Zp,{className:"grow bg-surface-100 p-3 transition-colors hover:bg-surface-200 border border-light hover:border-default cursor-pointer",onClick:e.onClick,"data-sentry-element":"Card","data-sentry-component":"ActionCard","data-sentry-source-file":"ActionCard.tsx",children:(0,s.jsxs)("div",{className:"relative flex items-start gap-3",children:[e.isBeta&&(0,s.jsx)(l.E,{className:"absolute -right-5 -top-5 bg-surface-300 bg-opacity-100 text-xs text-foreground",children:"Coming soon"}),(0,s.jsx)("div",{className:"rounded-full ".concat(e.bgColor," w-8 h-8 flex items-center justify-center flex-shrink-0"),children:e.icon}),(0,s.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,s.jsx)("h3",{className:"text-sm text-foreground mb-0",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-foreground-light",children:e.description})]})]})})},47689:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/editor",function(){return r(53265)}])},53265:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(80263),a=r(87355),l=r(53239),n=r(25481),i=r(12822),c=r(17369),d=r(18075),o=r(98180),u=r(32178),x=r(37836),p=r(23480),m=r(53674);let f=()=>{let e=(0,a.useRouter)(),{ref:t}=(0,n.g)(),r=(0,m.zv)(),c=(0,p.qM)();return(0,l.useEffect)(()=>{let s=c.dashboardHistory.editor,a=r.openTabs.find(e=>{var t;return m.qm.table.includes(null==(t=r.tabsMap[e])?void 0:t.type)});if(void 0!==s)e.push("/project/".concat(t,"/editor/").concat(c.dashboardHistory.editor));else if(a){var l;let s=r.tabsMap[a];s&&e.push("/project/".concat(t,"/editor/").concat(null==(l=s.metadata)?void 0:l.tableId))}},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.A,{"data-sentry-element":"NewTab","data-sentry-source-file":"index.tsx"}),(0,s.jsx)(i.A,{onTableCreated:r=>{e.push("/project/".concat(t,"/editor/").concat(r.id))},"data-sentry-element":"SidePanelEditor","data-sentry-source-file":"index.tsx"})]})};f.getLayout=e=>(0,s.jsx)(c.A,{children:(0,s.jsx)(d.$,{productMenu:(0,s.jsx)(u.A,{}),product:"Table Editor",children:(0,s.jsx)(o.A,{children:e})})});let h=f}},e=>{var t=t=>e(e.s=t);e.O(0,[89,4335,8345,2491,3730,6110,1185,7661,5599,2041,1018,9821,657,236,2981,4515,1674,3234,9480,4711,6137,4560,7795,3895,4109,8037,9377,6692,7871,4236,8523,9846,2156,5500,7369,7104,3133,2865,6972,9469,9915,5024,5076,2714,6593,636,8792],()=>t(47689)),_N_E=e.O()}]);